


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > BaseVariantAnnotationServiceImpl</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.cbioportal.genome_nexus.service.internal</a>
</div>

<h1>Coverage Summary for Class: BaseVariantAnnotationServiceImpl (org.cbioportal.genome_nexus.service.internal)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">BaseVariantAnnotationServiceImpl</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    94,4%
  </span>
  <span class="absValue">
    (17/18)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    73,5%
  </span>
  <span class="absValue">
    (75/102)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Copyright (c) 2015 - 2021 Memorial Sloan-Kettering Cancer Center.
&nbsp; *
&nbsp; * This library is distributed in the hope that it will be useful, but WITHOUT
&nbsp; * ANY WARRANTY, WITHOUT EVEN THE IMPLIED WARRANTY OF MERCHANTABILITY OR FITNESS
&nbsp; * FOR A PARTICULAR PURPOSE. The software and documentation provided hereunder
&nbsp; * is on an &quot;as is&quot; basis, and Memorial Sloan-Kettering Cancer Center has no
&nbsp; * obligations to provide maintenance, support, updates, enhancements or
&nbsp; * modifications. In no event shall Memorial Sloan-Kettering Cancer Center be
&nbsp; * liable to any party for direct, indirect, special, incidental or
&nbsp; * consequential damages, including lost profits, arising out of the use of this
&nbsp; * software and its documentation, even if Memorial Sloan-Kettering Cancer
&nbsp; * Center has been advised of the possibility of such damage.
&nbsp; */
&nbsp;
&nbsp;/*
&nbsp; * This file is part of cBioPortal.
&nbsp; *
&nbsp; * cBioPortal is free software: you can redistribute it and/or modify
&nbsp; * it under the terms of the GNU Affero General Public License as
&nbsp; * published by the Free Software Foundation, either version 3 of the
&nbsp; * License.
&nbsp; *
&nbsp; * This program is distributed in the hope that it will be useful,
&nbsp; * but WITHOUT ANY WARRANTY; without even the implied warranty of
&nbsp; * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
&nbsp; * GNU Affero General Public License for more details.
&nbsp; *
&nbsp; * You should have received a copy of the GNU Affero General Public License
&nbsp; * along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
&nbsp;*/
&nbsp;
&nbsp;package org.cbioportal.genome_nexus.service.internal;
&nbsp;
&nbsp;import org.apache.commons.logging.Log;
&nbsp;import org.apache.commons.logging.LogFactory;
&nbsp;import org.cbioportal.genome_nexus.component.annotation.HugoGeneSymbolResolver;
&nbsp;import org.cbioportal.genome_nexus.component.annotation.IndexBuilder;
&nbsp;import org.cbioportal.genome_nexus.component.annotation.ProteinChangeResolver;
&nbsp;import org.cbioportal.genome_nexus.model.*;
&nbsp;import org.cbioportal.genome_nexus.persistence.IndexRepository;
&nbsp;import org.cbioportal.genome_nexus.persistence.VariantAnnotationRepository;
&nbsp;import org.cbioportal.genome_nexus.service.*;
&nbsp;
&nbsp;import org.cbioportal.genome_nexus.service.cached.BaseCachedExternalResourceFetcher;
&nbsp;import org.cbioportal.genome_nexus.service.enricher.*;
&nbsp;import org.cbioportal.genome_nexus.service.exception.ResourceMappingException;
&nbsp;import org.cbioportal.genome_nexus.service.exception.VariantAnnotationNotFoundException;
&nbsp;import org.cbioportal.genome_nexus.service.exception.VariantAnnotationWebServiceException;
&nbsp;import org.springframework.web.client.HttpClientErrorException;
&nbsp;import org.springframework.web.client.ResourceAccessException;
&nbsp;
&nbsp;import java.util.*;
&nbsp;import java.util.stream.Collectors;
&nbsp;
&nbsp;import com.google.gson.Gson;
&nbsp;import com.mongodb.BasicDBObject;
&nbsp;import com.mongodb.DBObject;
&nbsp;
&nbsp;public abstract class BaseVariantAnnotationServiceImpl implements VariantAnnotationService
&nbsp;{
<b class="fc">&nbsp;    private static final Log LOG = LogFactory.getLog(BaseVariantAnnotationServiceImpl.class);</b>
&nbsp;
&nbsp;    private final BaseCachedExternalResourceFetcher&lt;VariantAnnotation, VariantAnnotationRepository&gt; resourceFetcher;
&nbsp;    private final EnsemblService ensemblService;
&nbsp;    private final CancerHotspotService hotspotService;
&nbsp;    private final MutationAssessorService mutationAssessorService;
&nbsp;    private final VariantAnnotationSummaryService variantAnnotationSummaryService;
&nbsp;    private final MyVariantInfoService myVariantInfoService;
&nbsp;    private final NucleotideContextService nucleotideContextService;
&nbsp;    private final PostTranslationalModificationService postTranslationalModificationService;
&nbsp;    private final SignalMutationService signalMutationService;
&nbsp;    private final OncokbService oncokbService;
&nbsp;    private final ClinvarVariantAnnotationService clinvarVariantAnnotationService;
&nbsp;    private final IndexRepository indexRepository;
&nbsp;    private final ProteinChangeResolver proteinChangeResolver;
&nbsp;    private final HugoGeneSymbolResolver hugoGeneSymbolResolver;
&nbsp;
&nbsp;    public BaseVariantAnnotationServiceImpl(
&nbsp;        BaseCachedExternalResourceFetcher&lt;VariantAnnotation, VariantAnnotationRepository&gt; resourceFetcher,
&nbsp;        EnsemblService ensemblService,
&nbsp;        CancerHotspotService hotspotService,
&nbsp;        MutationAssessorService mutationAssessorService,
&nbsp;        MyVariantInfoService myVariantInfoService,
&nbsp;        NucleotideContextService nucleotideContextService,
&nbsp;        VariantAnnotationSummaryService variantAnnotationSummaryService,
&nbsp;        PostTranslationalModificationService postTranslationalModificationService,
&nbsp;        SignalMutationService signalMutationService,
&nbsp;        OncokbService oncokbService,
&nbsp;        ClinvarVariantAnnotationService clinvarVariantAnnotationService,
&nbsp;        IndexRepository indexRepository,
&nbsp;        ProteinChangeResolver proteinChangeResolver,
&nbsp;        HugoGeneSymbolResolver hugoGeneSymbolResolver
<b class="fc">&nbsp;    ) {</b>
<b class="fc">&nbsp;        this.resourceFetcher = resourceFetcher;</b>
<b class="fc">&nbsp;        this.ensemblService = ensemblService;</b>
<b class="fc">&nbsp;        this.hotspotService = hotspotService;</b>
<b class="fc">&nbsp;        this.mutationAssessorService = mutationAssessorService;</b>
<b class="fc">&nbsp;        this.nucleotideContextService = nucleotideContextService;</b>
<b class="fc">&nbsp;        this.variantAnnotationSummaryService = variantAnnotationSummaryService;</b>
<b class="fc">&nbsp;        this.myVariantInfoService = myVariantInfoService;</b>
<b class="fc">&nbsp;        this.postTranslationalModificationService = postTranslationalModificationService;</b>
<b class="fc">&nbsp;        this.signalMutationService = signalMutationService;</b>
<b class="fc">&nbsp;        this.oncokbService = oncokbService;</b>
<b class="fc">&nbsp;        this.clinvarVariantAnnotationService = clinvarVariantAnnotationService;</b>
<b class="fc">&nbsp;        this.indexRepository = indexRepository;</b>
<b class="fc">&nbsp;        this.proteinChangeResolver = proteinChangeResolver;</b>
<b class="fc">&nbsp;        this.hugoGeneSymbolResolver = hugoGeneSymbolResolver;</b>
&nbsp;    }
&nbsp;
&nbsp;    // Needs to be overridden to support normalizing variants
&nbsp;    protected String normalizeVariant(String id)
&nbsp;    {
<b class="fc">&nbsp;        return id;</b>
&nbsp;    }
&nbsp;
&nbsp;    public Index buildIndex(VariantAnnotation variantAnnotation) {
<b class="fc">&nbsp;        IndexBuilder builder = new IndexBuilder(this.proteinChangeResolver, this.hugoGeneSymbolResolver);</b>
<b class="fc">&nbsp;        return builder.buildIndex(variantAnnotation);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public VariantAnnotation getAnnotation(String variant)
&nbsp;        throws VariantAnnotationNotFoundException, VariantAnnotationWebServiceException
&nbsp;    {
<b class="fc">&nbsp;        return this.getVariantAnnotation(this.normalizeVariant(variant), null);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public List&lt;VariantAnnotation&gt; getAnnotations(List&lt;String&gt; variants)
&nbsp;    {
<b class="nc">&nbsp;        return this.getVariantAnnotations(</b>
&nbsp;            variants,
&nbsp;            null
&nbsp;        );
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public VariantAnnotation getAnnotation(String variant, String isoformOverrideSource, Map&lt;String, String&gt; token, List&lt;String&gt; fields)
&nbsp;        throws VariantAnnotationWebServiceException, VariantAnnotationNotFoundException
&nbsp;    {
<b class="fc">&nbsp;        EnrichmentService postEnrichmentService = this.initPostEnrichmentService(isoformOverrideSource, fields, token);</b>
&nbsp;
<b class="fc">&nbsp;        return this.getVariantAnnotation(variant, postEnrichmentService);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public List&lt;VariantAnnotation&gt; getAnnotations(List&lt;String&gt; variants, String isoformOverrideSource, Map&lt;String, String&gt; token, List&lt;String&gt; fields)
&nbsp;    {
<b class="fc">&nbsp;        EnrichmentService postEnrichmentService = this.initPostEnrichmentService(isoformOverrideSource, fields, token);</b>
&nbsp;
<b class="fc">&nbsp;        return this.getVariantAnnotations(</b>
&nbsp;            variants,
&nbsp;            postEnrichmentService
&nbsp;        );
&nbsp;    }
&nbsp;
&nbsp;    private VariantAnnotation getVariantAnnotationExternally(String variant)
&nbsp;        throws VariantAnnotationNotFoundException, VariantAnnotationWebServiceException
&nbsp;    {
<b class="fc">&nbsp;        Optional&lt;VariantAnnotation&gt; variantAnnotation = null;</b>
&nbsp;
<b class="fc">&nbsp;        String normalizedVariant = normalizeVariant(variant);</b>
&nbsp;
&nbsp;        try {
&nbsp;            // get the annotation from the web service and save it to the DB
<b class="fc">&nbsp;            variantAnnotation = Optional.ofNullable(this.resourceFetcher.fetchAndCache(normalizedVariant));</b>
&nbsp;            
&nbsp;            // add new annotation to index db
<b class="fc">&nbsp;            variantAnnotation.ifPresent(annotation -&gt; {</b>
<b class="fc">&nbsp;                this.saveToIndexDb(normalizedVariant, annotation);</b>
&nbsp;            });
&nbsp;    
&nbsp;            // include original variant value too
<b class="fc">&nbsp;            variantAnnotation.ifPresent(x -&gt; x.setVariant(normalizedVariant));</b>
&nbsp;        }
<b class="nc">&nbsp;        catch (HttpClientErrorException e) {</b>
&nbsp;            // in case of web service error, throw an exception to indicate that there is a problem with the service.
<b class="nc">&nbsp;            throw new VariantAnnotationWebServiceException(normalizedVariant, e.getResponseBodyAsString(), e.getStatusCode());</b>
&nbsp;        }
<b class="nc">&nbsp;        catch (ResourceMappingException e) {</b>
&nbsp;            // TODO this only indicates that web service returns an incompatible response, but
&nbsp;            // this does not always mean that annotation is not found
<b class="nc">&nbsp;            throw new VariantAnnotationNotFoundException(normalizedVariant);</b>
&nbsp;        }
<b class="nc">&nbsp;        catch (ResourceAccessException e) {</b>
<b class="nc">&nbsp;            throw new VariantAnnotationWebServiceException(normalizedVariant, e.getMessage());</b>
<b class="fc">&nbsp;        }</b>
&nbsp;
&nbsp;        try {
<b class="fc">&nbsp;            VariantAnnotation returnValue = variantAnnotation.get();</b>
<b class="fc">&nbsp;            returnValue.setOriginalVariantQuery(variant);</b>
<b class="fc">&nbsp;            return returnValue;</b>
<b class="nc">&nbsp;        } catch (NoSuchElementException e) {</b>
<b class="nc">&nbsp;            throw new VariantAnnotationNotFoundException(normalizedVariant);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private List&lt;VariantAnnotation&gt; getVariantAnnotationsExternally(List&lt;String&gt; variants)
&nbsp;            throws VariantAnnotationWebServiceException {
<b class="fc">&nbsp;        List&lt;VariantAnnotation&gt; variantAnnotations = null;</b>
<b class="fc">&nbsp;        Map&lt;String, String&gt; normVarToOrigVarQueryMap = new LinkedHashMap&lt;&gt;();</b>
<b class="fc">&nbsp;        variants.forEach((variant) -&gt; {</b>
<b class="fc">&nbsp;            normVarToOrigVarQueryMap.put(this.normalizeVariant(variant), variant);</b>
&nbsp;        });
&nbsp;
&nbsp;        try {
&nbsp;            // get the annotations from the web service and save it to the DB
<b class="fc">&nbsp;            variantAnnotations = this.resourceFetcher.fetchAndCache(new ArrayList(normVarToOrigVarQueryMap.keySet()));</b>
<b class="fc">&nbsp;            for (VariantAnnotation variantAnnotation : variantAnnotations) {</b>
&nbsp;                // add new annotation to index db
<b class="fc">&nbsp;                this.saveToIndexDb(normVarToOrigVarQueryMap.get(variantAnnotation.getVariant()), variantAnnotation);</b>
<b class="fc">&nbsp;                variantAnnotation.setOriginalVariantQuery(normVarToOrigVarQueryMap.get(variantAnnotation.getVariant()));</b>
<b class="fc">&nbsp;            }</b>
<b class="nc">&nbsp;        } catch (HttpClientErrorException e) {</b>
&nbsp;            // in case of web service error, throw an exception to indicate that there is a
&nbsp;            // problem with the service.
<b class="nc">&nbsp;            throw new VariantAnnotationWebServiceException(normVarToOrigVarQueryMap.keySet().toString(), e.getResponseBodyAsString(),</b>
<b class="nc">&nbsp;                    e.getStatusCode());</b>
<b class="nc">&nbsp;        } catch (ResourceAccessException e) {</b>
<b class="nc">&nbsp;            throw new VariantAnnotationWebServiceException(normVarToOrigVarQueryMap.keySet().toString(), e.getMessage());</b>
<b class="nc">&nbsp;        } catch (ResourceMappingException e) {</b>
&nbsp;            // TODO this indicates that web service returns an incompatible response
<b class="fc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        return variantAnnotations;</b>
&nbsp;    }
&nbsp;
&nbsp;    private VariantAnnotation getVariantAnnotation(String variant)
&nbsp;        throws VariantAnnotationNotFoundException, VariantAnnotationWebServiceException
&nbsp;    {
<b class="fc">&nbsp;        return getVariantAnnotationExternally(variant);</b>
&nbsp;    }
&nbsp;
&nbsp;    private List&lt;VariantAnnotation&gt; getVariantAnnotations(List&lt;String&gt; variants)
&nbsp;            throws VariantAnnotationWebServiceException {
<b class="fc">&nbsp;        return getVariantAnnotationsExternally(variants);</b>
&nbsp;    }
&nbsp;
&nbsp;    private VariantAnnotation getVariantAnnotation(String variant, EnrichmentService postEnrichmentService)
&nbsp;        throws VariantAnnotationNotFoundException, VariantAnnotationWebServiceException
&nbsp;    {
<b class="fc">&nbsp;        VariantAnnotation annotation = this.getVariantAnnotation(variant);</b>
&nbsp;
<b class="fc">&nbsp;        if (annotation != null &amp;&amp;</b>
&nbsp;            postEnrichmentService != null)
&nbsp;        {
<b class="fc">&nbsp;            postEnrichmentService.enrichAnnotation(annotation);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return annotation;</b>
&nbsp;    }
&nbsp;
&nbsp;    private List&lt;VariantAnnotation&gt; getVariantAnnotations(List&lt;String&gt; variants,
&nbsp;                                                          EnrichmentService postEnrichmentService)
&nbsp;    {
<b class="fc">&nbsp;        List&lt;VariantAnnotation&gt; variantAnnotations = Collections.emptyList();</b>
&nbsp;
&nbsp;        try {
&nbsp;            // fetch all annotations at once
<b class="fc">&nbsp;            variantAnnotations = this.getVariantAnnotations(variants);</b>
&nbsp;
<b class="fc">&nbsp;            if (postEnrichmentService != null) {</b>
<b class="fc">&nbsp;                postEnrichmentService.enrichAnnotations(variantAnnotations);</b>
&nbsp;            }
<b class="nc">&nbsp;        } catch (VariantAnnotationWebServiceException e) {</b>
<b class="nc">&nbsp;            LOG.warn(e.getLocalizedMessage());</b>
<b class="fc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        return variantAnnotations;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void saveToIndexDb(String normalizedVariant, VariantAnnotation annotation) {
<b class="fc">&nbsp;        Gson gson = new Gson();</b>
<b class="fc">&nbsp;        DBObject dbObject = BasicDBObject.parse(gson.toJson(this.buildIndex(annotation)));</b>
<b class="fc">&nbsp;        this.indexRepository.saveDBObject(&quot;index&quot;, normalizedVariant, dbObject);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    private EnrichmentService initPostEnrichmentService(String isoformOverrideSource, List&lt;String&gt; fields, Map&lt;String, String&gt; token)
&nbsp;    {
&nbsp;        // The post enrichment service enriches the annotation after saving
&nbsp;        // the original annotation data to the repository. Any enrichment
&nbsp;        // performed by the post enrichment service is not saved
&nbsp;        // to the annotation repository.
<b class="fc">&nbsp;        EnrichmentService postEnrichmentService = new VEPEnrichmentService();</b>
&nbsp;
&nbsp;        // always register an isoform override enricher
&nbsp;        // if the source is invalid we will use the default override source
<b class="fc">&nbsp;        postEnrichmentService.registerEnricher(</b>
&nbsp;            new IsoformAnnotationEnricher(isoformOverrideSource, isoformOverrideSource, ensemblService)
&nbsp;        );
&nbsp;
<b class="fc">&nbsp;        if (fields != null &amp;&amp; fields.contains(&quot;hotspots&quot;))</b>
&nbsp;        {
<b class="nc">&nbsp;            postEnrichmentService.registerEnricher(</b>
<b class="nc">&nbsp;                new HotspotAnnotationEnricher(&quot;cancerHotspots&quot;, hotspotService, true)</b>
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (fields != null &amp;&amp; fields.contains(&quot;mutation_assessor&quot;))</b>
&nbsp;        {
<b class="nc">&nbsp;            postEnrichmentService.registerEnricher(</b>
&nbsp;                new MutationAssessorAnnotationEnricher(&quot;mutation_assessor&quot;, mutationAssessorService)
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (fields != null &amp;&amp; fields.contains(&quot;nucleotide_context&quot;))</b>
&nbsp;        {
<b class="fc">&nbsp;            postEnrichmentService.registerEnricher(</b>
&nbsp;                new NucleotideContextAnnotationEnricher(&quot;nucleotide_context&quot;, nucleotideContextService)
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (fields != null &amp;&amp; fields.contains(&quot;my_variant_info&quot;))</b>
&nbsp;        {
<b class="fc">&nbsp;            postEnrichmentService.registerEnricher(</b>
&nbsp;                new MyVariantInfoAnnotationEnricher(&quot;my_variant_info&quot;, myVariantInfoService)
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (fields != null &amp;&amp; fields.contains(&quot;ptms&quot;))</b>
&nbsp;        {
<b class="nc">&nbsp;            postEnrichmentService.registerEnricher(</b>
&nbsp;                new PostTranslationalModificationEnricher(&quot;ptm&quot;, postTranslationalModificationService)
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (fields != null &amp;&amp; fields.contains(&quot;signal&quot;))</b>
&nbsp;        {
<b class="nc">&nbsp;            postEnrichmentService.registerEnricher(</b>
&nbsp;                new SignalAnnotationEnricher(&quot;signal&quot;, signalMutationService)
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (fields != null &amp;&amp; fields.contains(&quot;oncokb&quot;))</b>
&nbsp;        {
<b class="nc">&nbsp;            String oncokbToken = null;</b>
<b class="nc">&nbsp;            if (token != null &amp;&amp; token.containsKey(&quot;oncokb&quot;)) {</b>
<b class="nc">&nbsp;                oncokbToken = token.get(&quot;oncokb&quot;);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            postEnrichmentService.registerEnricher(</b>
&nbsp;                new OncokbAnnotationEnricher(
&nbsp;                    &quot;oncokb&quot;,
&nbsp;                    oncokbService,
&nbsp;                    variantAnnotationSummaryService,
&nbsp;                    oncokbToken
&nbsp;                )
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (fields != null &amp;&amp; fields.contains(&quot;clinvar&quot;))</b>
&nbsp;        {
<b class="nc">&nbsp;            postEnrichmentService.registerEnricher(</b>
&nbsp;                new ClinvarVariantAnnotationEnricher(&quot;clinvar&quot;, clinvarVariantAnnotationService)
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (fields != null &amp;&amp; fields.contains(&quot;annotation_summary&quot;))</b>
&nbsp;        {
<b class="fc">&nbsp;            postEnrichmentService.registerEnricher(</b>
&nbsp;                new CanonicalTranscriptAnnotationEnricher(
&nbsp;                    &quot;annotation_summary&quot;,
&nbsp;                    variantAnnotationSummaryService
&nbsp;                )
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return postEnrichmentService;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-18 22:00</div>
</div>
</body>
</html>
